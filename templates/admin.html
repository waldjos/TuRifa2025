<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ static_version }}">
    <style>
      body { background: #071529; color: #e6eef8; font-family: Inter, sans-serif }
      .container { max-width:1100px; margin:30px auto; padding:18px }
      .row { display:flex; gap:12px; align-items:center }
      .card { background: rgba(255,255,255,0.02); padding:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.04) }
      .controls { display:flex; gap:8px; align-items:center }
      table { width:100%; border-collapse: collapse; margin-top:12px }
      th, td { padding:8px 10px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.03); font-size:14px }
      .muted { color: rgba(255,255,255,0.6); font-size:13px }
      .danger { background: linear-gradient(90deg,#ef4444,#b91c1c); color:white; padding:8px 10px; border-radius:8px; border:none }
    </style>
  </head>
  <body>
    <div class="container">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <h1>Admin Dashboard</h1>
        <div>
          <a href="/" class="btn-primary" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:8px 12px;border-radius:8px;text-decoration:none">Volver al sitio</a>
        </div>
      </div>

      <section class="card">
        <h2>Tasa de Cambio</h2>
        <div class="row">
          <div>
            <label for="rate">VES por 1 USD</label>
            <input id="rate" type="number" step="0.01" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit" />
          </div>
          <div class="controls">
            <button id="save-rate" class="btn-primary">Guardar tasa</button>
            <button id="refresh-rate" class="btn-primary" style="background:transparent;border:1px solid rgba(255,255,255,0.06)">Refrescar</button>
            <button id="export-csv" class="btn-primary" style="background:transparent;border:1px solid rgba(255,255,255,0.06)">Export CSV</button>
          </div>
        </div>
        <div style="margin-top:8px" class="muted">Última actualización: <span id="rate-updated">--</span></div>
      </section>

      <section class="card" style="margin-top:14px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h2>Ventas Registradas</h2>
          <div class="controls">
            <label for="total-tickets" class="muted">Total boletos:</label>
            <input id="total-tickets" type="number" min="1" style="width:120px;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit" />
            <button id="save-total" class="btn-primary">Guardar</button>
            <button id="clear-all" class="danger">Limpiar todo</button>
          </div>
        </div>

        <table aria-live="polite" id="purchases-table">
          <thead>
            <tr><th>Nombre</th><th>Identificación</th><th>Teléfono</th><th>Email</th><th>Tickets</th><th>Monto</th><th>Referencia</th><th>Timestamp</th></tr>
          </thead>
          <tbody id="purchases-body">
            <!-- rows populated by JS -->
          </tbody>
        </table>
      </section>
    </div>

  <script src="{{ url_for('static', filename='admin.js') }}?v={{ static_version }}"></script>
  </body>
</html>
