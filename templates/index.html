<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TuRifa2025 — Sorteo SUPER GANA $1,000</title>

  <!-- SEO / Social meta -->
  <meta name="description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisión en vivo y verificación pública del resultado. Soporte: validación entre 12-24 horas." />
  <meta name="robots" content="index, follow" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TuRifa2025 — Sorteo SUPER GANA $1,000" />
  <meta property="og:description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisión en vivo y verificación pública del resultado." />
  <meta property="og:image" content="{{ url_for('static', filename='efectivo.png') }}" />
  <meta property="og:site_name" content="TuRifa2025" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="TuRifa2025 — Sorteo SUPER GANA $1,000" />
  <meta name="twitter:description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisión en vivo y verificación pública del resultado." />
  <meta name="twitter:image" content="{{ url_for('static', filename='efectivo.png') }}" />

  <!-- JSON-LD structured data (Organization/Event) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Sorteo SUPER GANA",
    "description": "Sorteo público con verificación y transmisión en vivo. Premio principal $1,000 en efectivo.",
    "location": {
      "@type": "VirtualLocation",
      "url": "{{ request.url_root }}"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD",
      "availability": "https://schema.org/InStock"
    }
  }
  </script>

  <!-- Estilos -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="/favicon.ico" />

  <style>
    /* Barra de progreso mínima y accesible */
    #sales-progress {
      position: relative;
      height: 18px;
      background: #e6e6e6;
      border-radius: 999px;
      overflow: hidden;
    }
    #sales-progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg,#ff7a18,#ffb347);
      box-shadow: 0 0 18px rgba(255,123,24,0.12);
      transition: width 700ms ease-out;
    }
    #sales-progress-markers span {
      position: absolute;
      top: -4px;
      height: 26px;
      width: 1px;
      background: rgba(255,255,255,0.35);
    }
    .ticket-btn {
      background: #fff;
      border: 1px solid #ddd;
      padding: 6px 8px;
      border-radius: 6px;
      cursor: pointer;
      font-family: monospace;
      text-align: center;
    }
    .ticket-btn.selected {
      background: linear-gradient(90deg,#ff7a18,#ffb347);
      color: #fff;
      box-shadow: 0 4px 14px rgba(255,123,24,0.12);
      border-color: rgba(255,123,24,0.6);
    }
  </style>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    emailjs.init('p9hLWmmvXjeTINrFL');
  </script>

  <!-- Firebase SDK (modular) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDkq6BtLENRPP4MoSsyG3sn_18z7WdhzQ",
      authDomain: "turifa2025-7f3f1.firebaseapp.com",
      databaseURL: "https://turifa2025-7f3f1-default-rtdb.firebaseio.com",
      projectId: "turifa2025-7f3f1",
      storageBucket: "turifa2025-7f3f1.appspot.com",
      messagingSenderId: "788208791145",
      appId: "1:788208791145:web:8611671eb1b8196c4a5a78",
      measurementId: "G-F1YWVCMMJXP"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.firebaseDB = db;
    window.firebaseRef = ref;
    window.firebaseSet = set;
    window.firebaseGet = get;
    window.firebaseChild = child;
  </script>

  <!-- Script principal -->
  <script type="module" src="{{ url_for('static', filename='app.js') }}"></script>
</head>
<body>

  <!-- Logo -->
  <header>
    <img src="{{ url_for('static', filename='Logo.png') }}" alt="Logo Turifa2025" class="logo" />
    <div style="flex:1">
      <h1 style="font-size:20px;letter-spacing:1px;margin-bottom:4px">Turifa2025</h1>
      <div style="font-size:12px;color:rgba(255,255,255,0.6)">Sorteo: PRÓXIMAMENTE — anunciaremos el día oficial</div>
    </div>
  <a class="btn-primary" href="#premios" style="white-space:nowrap">Seleccionar boletos</a>
  <!-- Botón de admin visible públicamente (requiere login en /admin) -->
  <a class="btn-admin" href="/admin" style="margin-left:10px; padding:8px 10px; background:transparent; border:1px solid rgba(255,255,255,0.12); color:inherit; border-radius:8px; text-decoration:none; font-size:13px;">Admin</a>
  </header>

  <!-- Navegación -->
  <nav>
    <ul>
      <li><a href="#" id="btn-premios">PREMIOS</a></li>
      <li><a href="#" id="btn-preguntas">PREGUNTAS</a></li>
      <li><a href="#" id="btn-contacto">CONTACTO</a></li>
    </ul>
  </nav>

  <!-- Contenido principal -->
  <main>
    <!-- Premios -->
    <section id="premios" style="display:flex;gap:28px;align-items:center;justify-content:space-between;">
      <div style="flex:1">
    <h1 style="font-size:40px;line-height:1">SUPER COMBO GANA</h1>
  <p class="animated-text" style="font-size:20px;margin-top:6px"><strong>SUPER GANA — premio principal: $1,000</strong></p>
  <p style="margin-top:12px;color:rgba(255,255,255,0.8)">Compra tus boletos en USD o Bs y participa en el sorteo público de <strong>SUPER GANA</strong>. Transmisión en vivo y verificación pública del seed aleatorio.</p>
  <p style="margin-top:8px;color:rgba(255,255,255,0.7);font-size:14px">Soporte: La validación de tu participación puede tardar entre <strong>12 a 24 horas</strong>.</p>
        <div style="margin-top:18px"><a class="btn-primary" href="#ticket-grid">Seleccionar boletos</a></div>
      </div>
      <div style="width:46%">
        <div class="card-3d" style="padding:18px;border-radius:14px;">
          <img src="{{ url_for('static', filename='efectivo.png') }}" alt="Imagen del premio: $1,000 en efectivo" class="motos-img" aria-describedby="premio-desc" />
          <p id="premio-desc" class="sr-only">Premio principal: $1,000 USD en efectivo a entregar según las reglas del sorteo. Validación de participación: 12 a 24 horas.</p>
        </div>
      </div>
    </section>

    <!-- Progreso de ventas -->
    <section aria-labelledby="progreso-title" style="margin-top:18px;">
      <h2 id="progreso-title">Progreso de Ventas</h2>
      <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-bottom:8px;">
        <div style="font-size:13px;color:rgba(255,255,255,0.85)">Tasa: <strong id="rate-display">--</strong></div>
        <div style="font-size:11px;color:rgba(255,255,255,0.6)">Última actualización: <span id="rate-updated">--</span></div>
        <div id="rate-badge-container" style="margin-left:6px"></div>
      </div>
  <div id="sales-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de ventas">
        <div id="sales-progress-fill" aria-hidden="true"></div>
        <div id="sales-progress-markers" aria-hidden="true">
          <span style="left:25%"></span>
          <span style="left:50%"></span>
          <span style="left:75%"></span>
          <span style="left:100%"></span>
        </div>
      </div>
  <p class="text-xs text-muted-foreground" style="margin-top:6px;">¡Vamos <strong id="sales-pct">0%</strong>! Vendidos <span id="vendidos-count">0</span> / <span id="total-count">10000</span></p>
    </section>


    <!-- Formulario -->
    <section>
      <h2>Datos Personales</h2>
      <form id="form" novalidate>
        <div class="field">
          <label for="nombre">Nombre</label>
          <input type="text" name="nombre" id="nombre" required>
        </div>
        <div class="field">
          <label for="identificacion">Identificación</label>
          <input type="text" name="identificacion" id="identificacion">
        </div>
        <div class="field">
          <label for="telefono">Teléfono</label>
          <input type="tel" name="telefono" id="telefono" required>
        </div>
        <div class="field">
          <label for="email">Correo Electrónico</label>
          <input type="email" name="email" id="email" required>
        </div>
        <div class="field">
          <label for="boletos">Boletos Seleccionados</label>
          <input type="text" name="boletos" id="boletos" readonly aria-live="polite">
        </div>
        <div class="field">
          <label for="referencia">Referencia de Transacción</label>
          <input type="text" name="referencia" id="referencia" required>
        </div>
        <div class="field">
          <label for="monto">Monto Transferido</label>
          <div class="monto-row">
            <input type="number" name="monto" id="monto" required>
            <div class="currency-toggle" id="monto-currency">
              <button type="button" class="cur-btn active" data-currency="USD">USD</button>
              <button type="button" class="cur-btn" data-currency="VES">Bs</button>
            </div>
          </div>
        </div>
        <div class="checkbox-container">
          <input type="checkbox" id="acepto-terminos" name="acepto-terminos" required />
          <label for="acepto-terminos">He leído y acepto los <a href="#">Términos y Condiciones</a> y las <a href="#">Bases del sorteo</a></label>
        </div>
        <input type="submit" id="button" class="btn-primary" value="Confirmar Compra" aria-live="polite">
      </form>
    </section>

  </main>

  <!-- Pie de página -->
  <footer>
    <p>© 2025. Todos los derechos reservados.</p>
  </footer>

  <!-- Contenedor de mensajes -->
  <div id="popup"></div>
  <!-- Panel moderno de acciones (feedback para botones) -->
  <div id="action-panel" class="action-panel" aria-live="polite" aria-hidden="true"></div>

  <!-- Payment overlay and panel -->
  <div id="payment-overlay" class="payment-overlay" style="display:none"></div>
  <div id="payment-panel" class="payment-panel" style="display:none" aria-hidden="true"></div>

</body>
</html>
