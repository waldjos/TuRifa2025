<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TuRifa2025 ‚Äî Sorteo SUPER GANA $1,000</title>

  <!-- SEO / Social meta -->
  <meta name="description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisi√≥n en vivo y verificaci√≥n p√∫blica del resultado. Soporte: validaci√≥n entre 12-24 horas." />
  <meta name="robots" content="index, follow" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="TuRifa2025 ‚Äî Sorteo SUPER GANA $1,000" />
  <meta property="og:description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisi√≥n en vivo y verificaci√≥n p√∫blica del resultado." />
  <meta property="og:image" content="{{ url_for('static', filename='efectivo.png') }}" />
  <meta property="og:site_name" content="TuRifa2025" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="TuRifa2025 ‚Äî Sorteo SUPER GANA $1,000" />
  <meta name="twitter:description" content="Participa en el sorteo SUPER GANA: premio principal $1,000 en efectivo. Compra boletos en USD o Bs, transmisi√≥n en vivo y verificaci√≥n p√∫blica del resultado." />
  <meta name="twitter:image" content="{{ url_for('static', filename='efectivo.png') }}" />

  <!-- JSON-LD structured data (Organization/Event) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Sorteo SUPER GANA",
    "description": "Sorteo p√∫blico con verificaci√≥n y transmisi√≥n en vivo. Premio principal $1,000 en efectivo.",
    "location": {
      "@type": "VirtualLocation",
      "url": "{{ request.url_root }}"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD",
      "availability": "https://schema.org/InStock"
    }
  }
  </script>

  <!-- Estilos -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />

  <style>
    /* Barra de progreso m√≠nima y accesible */
    #sales-progress {
      position: relative;
      height: 18px;
      background: #e6e6e6;
      border-radius: 999px;
      overflow: hidden;
    }
    #sales-progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg,#ff7a18,#ffb347);
      box-shadow: 0 0 18px rgba(255,123,24,0.12);
      transition: width 700ms ease-out;
    }
    #sales-progress-markers span {
      position: absolute;
      top: -4px;
      height: 26px;
      width: 1px;
      background: rgba(255,255,255,0.35);
    }
    .ticket-btn {
      background: #fff;
      border: 1px solid #ddd;
      padding: 6px 8px;
      border-radius: 6px;
      cursor: pointer;
      font-family: monospace;
      text-align: center;
    }
    .ticket-btn.selected {
      background: linear-gradient(90deg,#ff7a18,#ffb347);
      color: #fff;
      box-shadow: 0 4px 14px rgba(255,123,24,0.12);
      border-color: rgba(255,123,24,0.6);
    }
  </style>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    emailjs.init('p9hLWmmvXjeTINrFL');
  </script>

  <!-- Firebase SDK (modular) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDkq6BtLENRPP4MoSsyG3sn_18z7WdhzQ",
      authDomain: "turifa2025-7f3f1.firebaseapp.com",
      databaseURL: "https://turifa2025-7f3f1-default-rtdb.firebaseio.com",
      projectId: "turifa2025-7f3f1",
      storageBucket: "turifa2025-7f3f1.appspot.com",
      messagingSenderId: "788208791145",
      appId: "1:788208791145:web:8611671eb1b8196c4a5a78",
      measurementId: "G-F1YWVCMMJXP"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.firebaseDB = db;
    window.firebaseRef = ref;
    window.firebaseSet = set;
    window.firebaseGet = get;
    window.firebaseChild = child;
  </script>

  <!-- Script principal -->
  <script type="module" src="{{ url_for('static', filename='app.js') }}"></script>
</head>
<body>

  <!-- Logo -->
  <header>
    <img src="{{ url_for('static', filename='Logo.png') }}" alt="Logo Turifa2025" class="logo" />
    <div style="flex:1">
      <h1 style="font-size:20px;letter-spacing:1px;margin-bottom:4px">Turifa2025</h1>
      <div style="font-size:12px;color:rgba(255,255,255,0.6)">Sorteo: PR√ìXIMAMENTE ‚Äî anunciaremos el d√≠a oficial</div>
    </div>
  <a class="btn-primary" href="#premios" style="white-space:nowrap">Seleccionar boletos</a>
  <!-- Bot√≥n de admin visible p√∫blicamente (requiere login en /admin) -->
  <a class="btn-admin" href="/admin" style="margin-left:10px; padding:8px 10px; background:transparent; border:1px solid rgba(255,255,255,0.12); color:inherit; border-radius:8px; text-decoration:none; font-size:13px;">Admin</a>
  </header>

  <!-- Navegaci√≥n -->
  <nav>
    <ul>
      <li><a href="#" id="btn-premios">PREMIOS</a></li>
      <li><a href="#" id="btn-preguntas">PREGUNTAS</a></li>
      <li><a href="#" id="btn-contacto">CONTACTO</a></li>
    </ul>
  </nav>

  <!-- Contenido principal -->
  <main>
    <!-- Premios -->
    <section id="premios" style="display:flex;gap:28px;align-items:center;justify-content:space-between;">
      <div style="flex:1">
    <h1 style="font-size:40px;line-height:1">SUPER COMBO GANA</h1>
  <p class="animated-text" style="font-size:20px;margin-top:6px"><strong>Premio principal: $1,000</strong></p>
  <p style="margin-top:12px;color:rgba(255,255,255,0.8)">Compra tus boletos en USD o Bs y participa en el sorteo p√∫blico de <strong>SUPER GANA</strong>. Transmisi√≥n en vivo y verificaci√≥n p√∫blica del seed aleatorio.</p>
  <p style="margin-top:8px;color:rgba(255,255,255,0.7);font-size:14px">Soporte: La validaci√≥n de tu participaci√≥n puede tardar entre <strong>12 a 24 horas</strong>.</p>
        <div style="margin-top:18px"><a class="btn-primary" href="#ticket-grid-title">Seleccionar boletos</a></div>
      </div>
      <div style="width:46%">
        <div class="card-3d" style="padding:18px;border-radius:14px;">
          <img src="{{ url_for('static', filename='efectivo.png') }}" alt="Imagen del premio: $1,000 en efectivo" class="motos-img" aria-describedby="premio-desc" />
          <p id="premio-desc" class="sr-only">Premio principal: $1,000 USD en efectivo a entregar seg√∫n las reglas del sorteo. Validaci√≥n de participaci√≥n: 12 a 24 horas.</p>
        </div>
      </div>
    </section>

    <!-- Progreso de ventas -->
    <section aria-labelledby="progreso-title" style="margin-top:18px;">
      <h2 id="progreso-title">Progreso de Ventas</h2>
      <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-bottom:8px;">
        <div style="font-size:13px;color:rgba(255,255,255,0.85)">Tasa: <strong id="rate-display">--</strong></div>
        <div style="font-size:11px;color:rgba(255,255,255,0.6)">√öltima actualizaci√≥n: <span id="rate-updated">--</span></div>
        <div id="rate-badge-container" style="margin-left:6px"></div>
      </div>
  <div id="sales-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progreso de ventas">
        <div id="sales-progress-fill" aria-hidden="true"></div>
        <div id="sales-progress-markers" aria-hidden="true">
          <span style="left:25%"></span>
          <span style="left:50%"></span>
          <span style="left:75%"></span>
          <span style="left:100%"></span>
        </div>
      </div>
  <p class="text-xs text-muted-foreground" style="margin-top:6px;">¬°Vamos <strong id="sales-pct">0%</strong>! Vendidos <span id="vendidos-count">0</span> / <span id="total-count">10000</span></p>
    </section>

    <!-- Selecci√≥n de boletos -->
    <section class="section-card">
      <h2 id="ticket-grid-title">BOLETOS DISPONIBLES</h2>

      <div class="booking-grid">
        <!-- Left: controls & form -->
        <aside class="booking-controls">
          <form id="boletos-form" aria-labelledby="ticket-grid-title">
            <div class="form-row">
              <label for="numero-boletos">N√∫mero de boletos (m√≠nimo 2)</label>
              <input type="number" id="numero-boletos" name="numero-boletos" min="1" value="2" aria-describedby="numero-help" />
              <div id="numero-help" class="sr-only">Selecciona m√≠nimo 2 boletos seg√∫n reglas</div>
            </div>

            <div class="controls-row">
              <div class="left-controls">
                <button type="button" id="btn-azar" class="btn-primary small">Elegir boletos</button>
                <label for="currency">Moneda</label>
                <select id="currency">
                  <option value="USD">USD</option>
                  <option value="VES">Bs</option>
                </select>
                <div class="page-controls" style="margin-top: 10px;">
                  <button id="page-prev" type="button" class="btn-secondary small">Prev</button>
                  <span id="page-index">1</span>
                  <button id="page-next" type="button" class="btn-secondary small">Next</button>
                  <label for="per-page" style="margin-left: 10px;">Por p√°gina:</label>
                  <select id="per-page">
                    <option value="100">100</option>
                    <option value="200">200</option>
                    <option value="500">500</option>
                  </select>
                </div>
              </div>
              <div class="right-controls" aria-live="polite">
                <div class="selected-count">Seleccionados: <strong id="boletos-seleccionados">0</strong></div>
              </div>
            </div>

            <div class="summary-row">
              <ul id="lista-numeros" aria-live="polite" class="picked-list"></ul>
              <div class="totals">Total: <span id="total-usd">0 USD</span> ‚Äî <span id="total-bolivares">0</span> Bs</div>
            </div>
          </form>
        </aside>

        <!-- Right: ticket grid -->
        <div id="ticket-grid" class="ticket-grid"></div>
      </div>

    <!-- M√©todos de pago -->
    <section class="section-card" style="margin-top: 24px;">
      <h2>M√©todos de Pago</h2>
      <div class="payment-methods" style="display: flex; gap: 20px; flex-wrap: wrap;">
        <label class="payment-option" style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
          <input type="radio" name="payment-method" value="pagomovil" checked />
          <img src="{{ url_for('static', filename='pagomovil.png') }}" alt="Pago M√≥vil" style="height: 40px;" />
          Pago M√≥vil
        </label>
        <label class="payment-option" style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
          <input type="radio" name="payment-method" value="zelle" />
          <img src="{{ url_for('static', filename='zelle.png') }}" alt="Zelle" style="height: 40px;" />
          Zelle
        </label>
      </div>
      <div id="payment-details" style="margin-top: 16px;">
        <div id="pagomovil-details" style="display:none;">
          <p><strong>Cuenta:</strong> 0134</p>
          <p><strong>C√©dula:</strong> 22017682 <button class="copy-btn" data-copy="pagomovil-cedula" aria-label="Copiar c√©dula">üìã</button></p>
          <p><strong>Tel√©fono:</strong> 04129172646 <button class="copy-btn" data-copy="pagomovil-telefono" aria-label="Copiar tel√©fono">üìã</button></p>
        </div>
        <div id="zelle-details" style="display:none;">
          <p><strong>Nombre:</strong> Yhoendri Aponte</p>
          <p><strong>Tel√©fono:</strong> +1-678-749-16-4</p>
          <button class="copy-btn" data-copy="zelle" aria-label="Copiar datos de Zelle">Copiar datos</button>
        </div>
      </div>
    </section>

    <!-- Formulario -->
    <section>
      <h2>Datos Personales</h2>
      <form id="form" novalidate>
        <div class="field">
          <label for="nombre">Nombre</label>
          <input type="text" name="nombre" id="nombre" required>
        </div>
        <div class="field">
          <label for="identificacion">Identificaci√≥n</label>
          <input type="text" name="identificacion" id="identificacion">
        </div>
        <div class="field">
          <label for="telefono">Tel√©fono</label>
          <input type="tel" name="telefono" id="telefono" required>
        </div>
        <div class="field">
          <label for="email">Correo Electr√≥nico</label>
          <input type="email" name="email" id="email" required>
        </div>
        <div class="field">
          <label for="boletos">Boletos Seleccionados</label>
          <input type="text" name="boletos" id="boletos" readonly aria-live="polite">
        </div>
        <div class="field">
          <label for="referencia">Referencia de Transacci√≥n</label>
          <input type="text" name="referencia" id="referencia" required>
        </div>
        <div class="field">
          <label for="monto">Monto Transferido</label>
          <div class="monto-row">
            <input type="number" name="monto" id="monto" required>
            <div class="currency-toggle" id="monto-currency">
              <button type="button" class="cur-btn active" data-currency="USD">USD</button>
              <button type="button" class="cur-btn" data-currency="VES">Bs</button>
            </div>
          </div>
        </div>

        <div class="checkbox-container">
          <input type="checkbox" id="acepto-terminos" name="acepto-terminos" required />
          <label for="acepto-terminos">He le√≠do y acepto los <a href="#">T√©rminos y Condiciones</a> y las <a href="#">Bases del sorteo</a></label>
        </div>

        <input type="submit" id="button" class="btn-primary" value="Confirmar Compra" aria-live="polite">
      </form>
    </section>

  </main>

  <!-- Pie de p√°gina -->
  <footer>
    <p>¬© 2025. Todos los derechos reservados.</p>
  </footer>

  <!-- Contenedor de mensajes -->
  <div id="popup"></div>
  <!-- Panel moderno de acciones (feedback para botones) -->
  <div id="action-panel" class="action-panel" aria-live="polite" aria-hidden="true"></div>

  <!-- Payment overlay and panel -->
  <div id="payment-overlay" class="payment-overlay" style="display:none"></div>
  <div id="payment-panel" class="payment-panel" style="display:none" aria-hidden="true"></div>

</body>
</html>
